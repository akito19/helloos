# Day 16

### スリープ

マルチタスク実行時，アイドル時間が長いタスクの電気代をどうにかしたい．また，同時に動いている別のタスクがアイドルでなく普通に動いているのであれば，リソースをそっちに割いてやりたい．
そこで，暇な方のタスクをスリープさせる．

方針は， `taskctl->tasks[]` から該当のタスクを削除する，つまりタスクのリストから忙しくないタスクを消せばスリープ状態になる．またデータが来るなりしてタスクが起きることがあれば， `task_run()`．

### タスク優先度

マウスやキーボードのような外部入力系やネットワークなどは，プライオリティ高く処理してほしいので，優先度を高めにしつつ，処理がないときは即スリープするみたいな対応をとるといい．

#### 疑問

`harib13e` の最後の状態で，マウスを動かしているとき，タスクBの counter はほぼ同じ数値になって，マウスを止めたらBの counter はこれまで通り差がついた．

後者の状態は，マウス（タスクA）がスリープしたほか，なにより元の priority によるものだと思うので納得だが，最初のマウスぐりぐりしたときに数値が同じになるのはなぜなのだろう． priority はいじっていないはず．

あくまで `TASKLEVEL` が優先されていて，同一レベル内の priority は相対的に軽視されている？

期待する挙動はマウスの挙動によらず，これまで通りcounterの差があるものだと思っていた．
